interactions:
- request:
    body: '{"query": "query {\nmeta_ai_model {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model":[]}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '29'
      x-request-id:
      - 87167e80-1a78-4372-998b-293641a967e5
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "mutation {\ninsert_meta_ai_model_one(object: {description: \"\",
      inputSchema: \"null\", metadata: null, modelSavePath: \"\", name: \"model_2\",
      outputSchema: \"null\", root_id: null, stage: LOCAL, version: 1, visibility:
      PRIVATE, weightsPath: \"\"}) {\nname\nversion\nid\nstage\ndescription\nvisibility\nroot_id\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"insert_meta_ai_model_one":{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","stage":"LOCAL","description":"","visibility":"PRIVATE","root_id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420"}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '217'
      x-request-id:
      - 0948c323-0830-49a8-ada4-7dbfcc538e7d
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"7b07dc4c-eb04-43f2-b9e6-e972ceb74420\")
      {\nname\nversion\nid\nai_worker_id\ndescription\nvisibility\ninputSchema\noutputSchema\nroot_id\nserved_by\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"description":"","visibility":"PRIVATE","inputSchema":"null","outputSchema":"null","root_id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","served_by":null}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '276'
      x-request-id:
      - f96f056a-3f2f-41e4-9d26-8f5c97481a9c
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"7b07dc4c-eb04-43f2-b9e6-e972ceb74420\")
      {\nroot_model {\nsibling_models {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"root_model":{"sibling_models":[{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"visibility":"PRIVATE"}]}}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '186'
      x-request-id:
      - 283f8cc5-5f9e-4554-909e-4619cc9240f0
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "mutation {\ninsert_meta_ai_model_one(object: {description: \"\",
      inputSchema: \"null\", metadata: null, modelSavePath: \"\", name: \"model_2\",
      outputSchema: \"null\", root_id: \"7b07dc4c-eb04-43f2-b9e6-e972ceb74420\", stage:
      LOCAL, version: 2, visibility: PRIVATE, weightsPath: \"\"}) {\nname\nversion\nid\nstage\ndescription\nvisibility\nroot_id\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"insert_meta_ai_model_one":{"name":"model_2","version":2,"id":"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f","stage":"LOCAL","description":"","visibility":"PRIVATE","root_id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420"}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '217'
      x-request-id:
      - 32021929-661f-4546-b73c-91404d0a3601
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f\")
      {\nname\nversion\nid\nai_worker_id\ndescription\nvisibility\ninputSchema\noutputSchema\nroot_id\nserved_by\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"name":"model_2","version":2,"id":"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f","ai_worker_id":null,"description":"","visibility":"PRIVATE","inputSchema":"null","outputSchema":"null","root_id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","served_by":null}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '276'
      x-request-id:
      - 18c8986d-9276-4b08-8ced-3437486997e2
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "mutation {\ninsert_meta_ai_model_one(object: {description: \"\",
      inputSchema: \"null\", metadata: null, modelSavePath: \"\", name: \"model_3\",
      outputSchema: \"null\", root_id: null, stage: LOCAL, version: 2, visibility:
      PRIVATE, weightsPath: \"\"}) {\nname\nversion\nid\nstage\ndescription\nvisibility\nroot_id\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"errors":[{"extensions":{"internal":{"statement":"WITH \"meta_ai_model__mutation_result_alias\"
        AS (INSERT INTO \"meta_ai\".\"model\" ( \"stage\", \"editorId\", \"createdAt\",
        \"ai_worker_username\", \"modelSavePath\", \"ai_worker_id\", \"visibility\",
        \"outputSchema\", \"weightsPath\", \"root_id\", \"ownerId\", \"inputSchema\",
        \"name\", \"served_by\", \"version\", \"metadata\", \"id\", \"updatedAt\",
        \"endpoint\", \"description\" ) VALUES ((''LOCAL'')::text, DEFAULT, DEFAULT,
        DEFAULT, ('''')::text, DEFAULT, (''PRIVATE'')::text, (''\"null\"'')::jsonb,
        ('''')::text, (NULL)::uuid, (''1'')::bigint, (''\"null\"'')::jsonb, (''model_3'')::text,
        DEFAULT, (''2'')::integer, (NULL)::jsonb, DEFAULT, DEFAULT, DEFAULT, ('''')::text)  RETURNING
        * , (''true'')::boolean AS \"check__constraint\"), \"meta_ai_model__all_columns_alias\"
        AS (SELECT  \"id\" , \"createdAt\" , \"name\" , \"metadata\" , \"ownerId\"
        , \"version\" , \"endpoint\" , \"description\" , \"visibility\" , \"updatedAt\"
        , \"editorId\" , \"inputSchema\" , \"outputSchema\" , \"stage\" , \"modelSavePath\"
        , \"weightsPath\" , \"ai_worker_id\" , \"ai_worker_username\" , \"root_id\"
        , \"served_by\"  FROM \"meta_ai_model__mutation_result_alias\"      ) SELECT  (SELECT  coalesce((json_agg(\"root\"
        )->0), ''null'' ) AS \"root\" FROM  (SELECT  row_to_json((SELECT  \"_1_e\"  FROM  (SELECT  \"_0_root.base\".\"name\"
        AS \"name\", \"_0_root.base\".\"version\" AS \"version\", \"_0_root.base\".\"id\"
        AS \"id\", \"_0_root.base\".\"stage\" AS \"stage\", \"_0_root.base\".\"description\"
        AS \"description\", \"_0_root.base\".\"visibility\" AS \"visibility\", \"_0_root.base\".\"root_id\"
        AS \"root_id\"       ) AS \"_1_e\"      ) ) AS \"root\" FROM  (SELECT  *  FROM
        \"meta_ai_model__all_columns_alias\" WHERE (''true'')     ) AS \"_0_root.base\"      )
        AS \"_2_root\"      ) , (SELECT  coalesce(bool_and(\"check__constraint\" ),
        ''true'' )  FROM \"meta_ai_model__mutation_result_alias\"      )        ","prepared":false,"error":{"exec_status":"FatalError","hint":"check
        Use the model_id of the root model to set the root_id","message":"Missing
        root_id, Models with version > 1 require root_id","status_code":"P0001","description":null},"arguments":[]},"path":"$.selectionSet.insert_meta_ai_model_one.args.object","code":"unexpected"},"message":"database
        query error"}]}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"7b07dc4c-eb04-43f2-b9e6-e972ceb74420\")
      {\nroot_model {\nsibling_models {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"root_model":{"sibling_models":[{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"visibility":"PRIVATE"},
        {"name":"model_2","version":2,"id":"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f","ai_worker_id":null,"visibility":"PRIVATE"}]}}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '305'
      x-request-id:
      - 5469fca9-01ac-4f1c-a80d-d77946e43628
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f\")
      {\nroot_model {\nsibling_models {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"root_model":{"sibling_models":[{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"visibility":"PRIVATE"},
        {"name":"model_2","version":2,"id":"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f","ai_worker_id":null,"visibility":"PRIVATE"}]}}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '305'
      x-request-id:
      - 4b2adb98-6130-4538-9f49-9689a76d6aac
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f\")
      {\nroot_model {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}\n}", "variables":
      null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"root_model":{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"visibility":"PRIVATE"}}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '165'
      x-request-id:
      - 24d3b891-ec14-433f-8e10-5d51f3769a9a
    status:
      code: 200
      message: OK
- request:
    body: '{"query": "query {\nmeta_ai_model_by_pk(id: \"7b07dc4c-eb04-43f2-b9e6-e972ceb74420\")
      {\nroot_model {\nsibling_models {\nname\nversion\nid\nai_worker_id\nvisibility\n}\n}\n}\n}",
      "variables": null, "operationName": null}'
    headers:
      Accept:
      - application/json; charset=utf-8
      Accept-Encoding:
      - gzip
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
    method: POST
    uri: http://localhost:50283/v1/graphql
  response:
    body:
      string: '{"data":{"meta_ai_model_by_pk":{"root_model":{"sibling_models":[{"name":"model_2","version":1,"id":"7b07dc4c-eb04-43f2-b9e6-e972ceb74420","ai_worker_id":null,"visibility":"PRIVATE"},
        {"name":"model_2","version":2,"id":"1cf9a365-d6ee-42d0-b8bd-19f446e44d8f","ai_worker_id":null,"visibility":"PRIVATE"}]}}}}'
    headers:
      Content-Type:
      - application/json; charset=utf-8
      Date:
      - Fri, 25 Feb 2022 10:12:50 GMT
      Server:
      - Warp/3.3.14
      Transfer-Encoding:
      - chunked
      content-length:
      - '305'
      x-request-id:
      - 63122b81-b9c1-4675-91e0-b7ef689e36a8
    status:
      code: 200
      message: OK
version: 1
